(this["webpackJsonptakeoff-referral-program"]=this["webpackJsonptakeoff-referral-program"]||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(8),s=a.n(n),c=a(21),i=a.n(c),l=a(10),o=a(19),d=o.a.initializeApp({apiKey:"AIzaSyADL0J2TqSD6bFVhcdL1EOG8PX-iVFBZCo",authDomain:"takeoff-referral-program.firebaseapp.com",projectId:"takeoff-referral-program",databaseURL:"https://takeoff-referral-program-default-rtdb.firebaseio.com/",storageBucket:"takeoff-referral-program.appspot.com",messagingSenderId:"456965155597",appId:"1:456965155597:web:a435e87f56fee731479e44",measurementId:"G-QV1496Q788"}),u=(o.a.database(),d),j=(a(31),function(e){var t=e.email,a=e.setEmail,n=e.password,s=e.setPassword,c=e.handleLogin,i=e.handleSignup,l=e.hasAccount,o=e.setHasAccount,d=e.emailError,u=e.passwordError,j=e.referEmail,b=e.setReferEmail,h=e.code,f=e.setCode,m=e.handleReferral;return Object(r.jsxs)("section",{className:"login container landing justify-content-center text-center",children:[Object(r.jsx)("h1",{children:"Welcome to The Takeoff Referrals Site!"}),Object(r.jsxs)("nav",{className:"col-12",children:[Object(r.jsx)("br",{}),Object(r.jsx)("a",{target:"_blank",href:"http://thetakeoff.substack.com",children:"View The Takeoff Substack Here"})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"column col-12 col-md-5 border border-primary",children:[Object(r.jsx)("h1",{children:"Login or Register:"}),Object(r.jsx)("label",{children:"Username:"}),Object(r.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:t,onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("p",{className:"errorMsg",children:d}),Object(r.jsx)("label",{children:"Password:"}),Object(r.jsx)("input",{type:"password",autoFocus:!0,required:!0,value:n,onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("p",{className:"errorMsg",children:u}),Object(r.jsx)("div",{className:"btnContainer",children:l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:"btn btn-success",onClick:i,children:"Sign up"}),Object(r.jsxs)("p",{children:["Have an account?",Object(r.jsx)("span",{className:"btn btn-link",onClick:function(){return o(!l)},children:"Sign in"})]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:"btn btn-success",onClick:c,children:"Login"}),Object(r.jsxs)("p",{children:["Don't have an account?",Object(r.jsx)("span",{className:"btn btn-link",onClick:function(){return o(!l)},children:"Sign up"})]})]})})]}),Object(r.jsx)("div",{className:"col-0 col-md-2"}),Object(r.jsxs)("div",{className:"column col-12 col-md-5 border border-primary",children:[Object(r.jsx)("h1",{children:"Subscribe to The Takeoff"}),Object(r.jsx)("label",{children:"Email:"}),Object(r.jsx)("input",{type:"email",id:"email_refer_form",autoFocus:!0,required:!0,value:j,onChange:function(e){return b(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:"Code:"}),Object(r.jsx)("input",{type:"text",id:"code_refer_form",autoFocus:!0,required:!0,value:h,onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("div",{className:"btnContainer",children:Object(r.jsx)("button",{className:"btn btn-warning",onClick:m,children:"Subscribe!"})})]})]}),Object(r.jsx)("br",{}),Object(r.jsx)("img",{className:"img-fluid",height:"336",width:"1010",src:"takeoffRect.jpeg",alt:"Takeoff Logo"})]})}),b=a(12),h=a(13),f=a(16),m=a(15),O=a(14),g=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){return Object(b.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.refers;return 0===e?Object(r.jsx)("ul",{children:Object(r.jsx)("li",{children:"Free Prize for Creating Account"})}):e>0&&e<2?Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Free Prize for Creating Account"}),Object(r.jsx)("li",{children:"The Takeoff Hat"})]}):e>1&&e<5?Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Free Prize for Creating Account"}),Object(r.jsx)("li",{children:"The Takeoff Hat"}),Object(r.jsx)("li",{children:"The Takeoff T-Shirt"})]}):Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Free Prize for Creating Account"}),Object(r.jsx)("li",{children:"The Takeoff Hat"}),Object(r.jsx)("li",{children:"The Takeoff T-Shirt"}),Object(r.jsx)("li",{children:"The Takeoff Car"})]})}}]),a}(s.a.Component),x=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"emails",value:function(){var e=[];u.database().ref("emails").orderByChild("email").on("child_added",(function(t){console.log(t.val().email),-1===e.indexOf(t.val().email)&&e.push(t.val().email)}));var t=Array.from(new Set(e));return console.log("logging unique array:"),console.log(t),t}},{key:"render",value:function(){var e=this.emails();console.log("in render"),console.log("emails length: "+e.length),document.getElementById("rootDiv").innerHTML="";var t=document.createElement("h3");t.innerText="Signed up emails below:",document.getElementById("rootDiv").appendChild(t);for(var a=0;a<e.length;a++){var n=document.createElement("p");n.innerHTML=e[a],document.getElementById("rootDiv").appendChild(n)}return Object(r.jsx)("div",{id:"rootDiv2"})}}]),a}(s.a.Component),v=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var r;return Object(b.a)(this,a),(r=t.call(this,e)).state={ref_value:0,ref_code:"",handleLogout:e.handleLogout,user:e.user},r.setVariables=r.setVariables.bind(Object(f.a)(r)),r}return Object(h.a)(a,[{key:"setVariables",value:function(e,t){console.log(e),this.setState({ref_value:e,ref_code:t})}},{key:"componentDidMount",value:function(){var e=this,t=u.database().ref("user");console.log(this.state.user.email);var a=999,r="error";t.orderByChild("email").equalTo(this.state.user.email).on("child_added",(function(t){a=t.val().referrals,r=t.val().code,console.log(r),e.setVariables(a,r)}))}},{key:"render",value:function(){return"root@root.root"===this.state.user.email?(console.log("in render of hero for root"),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Logged in as Root"}),Object(r.jsx)("button",{className:"btn btn-danger",onClick:this.state.handleLogout,children:"Logout"}),Object(r.jsx)(x,{})]})):Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsxs)("div",{className:"hero",children:[console.log("in return for Hero"),Object(r.jsxs)("nav",{className:"nav row",children:[Object(r.jsx)("div",{className:"col-3 justify-content-center",children:Object(r.jsxs)("h2",{className:"d-flex justify-content-left",children:["Welcome ",this.state.user.email]})}),Object(r.jsx)("div",{className:"col-7"}),Object(r.jsx)("div",{className:"col-2 pt-4",children:Object(r.jsx)("button",{className:"btn btn-danger",onClick:this.state.handleLogout,children:"Logout"})})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h1",{className:"d-inline",children:"Your Referral Code: "}),Object(r.jsx)("h1",{className:"d-inline refCode",children:this.state.ref_code})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"prizes",children:[Object(r.jsxs)("h3",{children:["You have referred ",this.state.ref_value," people. Your Prizes:"]}),Object(r.jsx)(g,{refers:this.state.ref_value})]})]})})}}]),a}(s.a.Component),p=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),i=Object(l.a)(c,2),o=i[0],d=i[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),f=h[0],m=h[1],O=Object(n.useState)(""),g=Object(l.a)(O,2),x=g[0],p=g[1],k=Object(n.useState)(""),C=Object(l.a)(k,2),y=C[0],N=C[1],T=Object(n.useState)(""),S=Object(l.a)(T,2),w=S[0],E=S[1],L=Object(n.useState)(""),_=Object(l.a)(L,2),A=_[0],I=_[1],B=Object(n.useState)(""),F=Object(l.a)(B,2),H=F[0],P=F[1],z=function(){p(""),N("")},D=function(){u.auth().onAuthStateChanged((function(e){e?(d(""),m(""),s(e)):s("")}))};return Object(n.useEffect)((function(){D()}),[]),Object(r.jsx)("div",{className:"App",children:a?Object(r.jsx)(v,{handleLogout:function(){document.getElementById("rootDiv").innerHTML="",u.auth().signOut()},user:a}):Object(r.jsx)(j,{email:o,setEmail:d,password:f,setPassword:m,handleLogin:function(){z(),u.auth().signInWithEmailAndPassword(o,f).catch((function(e){switch(e.code){case"auth/Invalid-email":case"auth/user-disabled":case"auth/user-not-found":p(e.message);break;case"auth/wrong-password":N(e.message)}}))},handleSignup:function(){z(),u.auth().createUserWithEmailAndPassword(o,f).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":p(e.message);break;case"auth/weak-password":N(e.message)}}));var e=u.database().ref("user").push();e.set({email:o,referrals:0,code:e.key})},hasAccount:w,setHasAccount:E,emailError:x,passwordError:y,referEmail:A,setReferEmail:I,code:H,setCode:P,handleReferral:function(){if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(A)){document.getElementById("email_refer_form").value="",document.getElementById("code_refer_form").value="";var e=u.database().ref("emails"),t=0;if(e.orderByChild("email").equalTo(A).on("child_added",(function(e){console.log(e.val().email),t+=1})),0==t){var a=0,r=u.database().ref("user");r.once("value",(function(e){e.hasChild(H)?(r.child(H).on("value",(function(e){a=e.val().referrals})),r.child(H).update({referrals:a+1}),u.database().ref("emails").push({email:A}),alert("You have successfully signed up")):alert("Invalid Code")}))}else alert("Email already signed up")}else alert("Invalid Email")}})})};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.aeb74570.chunk.js.map